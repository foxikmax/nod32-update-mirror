# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog][keepachangelog] and this project adheres to [Semantic Versioning][semver].

## UNRELEASED

### Changed

- Application rewritten to golang

## v2.2.0 - Aug 27, 2018

### Changed

- Option `NGINX_AUTH_USERS_AND_PASSWORDS` instead `NGINX_USE_AUTH` + `NGINX_AUTH_USER` + `NGINX_AUTH_PASSWORD`
- `scheduler` enttypoint script a little bit refactored (function `write_env_into_config_file` added)

## v2.1.0 - Aug 27, 2018

### Added

- Option `NOD32MIRROR_DOWNLOAD_MAX_TIME` (try to fix issue [#66])

[#66]:https://github.com/tarampampam/nod32-update-mirror/issues/66

## v2.0.0 - Aug 27, 2018

### Changed

- Application now docker-based (thx for idea to [kran0][kran0])

[kran0]:https://github.com/kran0

## v1.0.1.8 - Jul 13, 2016

### Changed

- `curl` выключен по умолчанию, так как с ним замечены некоторые проблемы (через некоторое время nod32 перестает обновляться с зеркала - причина выясняется)
- После очистки зеркала добавлен вывод статистики

## v1.0.1.7 - Jul 12, 2016

### Changed

- Добавлен вывод статистики файлов зеркала обновлений

## v1.0.1.6 - Jul 11, 2016

### Changed

- Переписан README файл
- `changeslog` вынесен в отдельный файл
- Изменены некоторые настройки, выставленные в файле конфига и веб-морды по умолчанию

## v1.0.1.5 - Jul 11, 2016

### Changed

- Поддержка `Apache` окончательно завершена, для корректной работы требуется `nginx`
- Секция `[HOSTS]` всё таки отключена, так как в нашем случае она не нужна. Обновлен конфиг для `nginx`

## v1.0.1.3 - Jul 10, 2016

### Changed

- Обновлен веб-интерфейс

## v1.0.1.2 - Jul 9, 2016

### Changed

- Небольшие визуальные изменения и исправлен баг с недостающим слешем в путях файлов `update.ver`

## v1.0.1.0 - Jul 9, 2016

Объемное изменение

### Added

- Добавлены опции `NOD32MIRROR_BASE_URI`, `NOD32MIRROR_URI_PATH` и некоторые другие
- Добавлена поддержка `pcu` *(Program Component Update)*

### Changed

- Возвращена поддержка секции `[HOSTS]` в файле `update.ver` *(для неё-то и нужно указание URI сервера)*
- Изменены некоторые настройки "по умолчанию"
- Протестирована работа ESET Nod32 v5 с зеркалом. Корректность работы более поздних версий антивируса не представляется возможным на данный момент, так как лень

## v1.0.0.1 - Jul 8, 2016

### Fixed

- Issue #43 fix

## v1.0.0.0 - Jul 8, 2016

### Changed

- Полностью переписан. **Изменены параметры запуска**
- Новый web-интерфейс

## v0.4.5.1 - Jun 26, 2016

### Changed

- Обновлен веб-интерфейс
- Обновлен пример конфига для nginx
- Конфиги для apache обновляться более не будут

## v0.4.5 - Mar 31, 2016

### Fixed

- Исправлена ошибка обновленного пути для проверки валидности ключей (Issue #38)

## v0.4.4 - Jul 29, 2015

### Fixed

- Исправлена ошибка обновленного пути для проверки валидности ключей (Issue #26)

## v0.4.3.1 - Feb 22, 2015

### Added

- Добавлена поддержка web-сервера **nginx**
- Добавлен примерный конфиг

## v0.4.3 - Feb 15, 2015

### Changed

- Переработан веб-интерфейс
- Убрано лишнее из `.htaccess` файла
- Добавлены свои страницы ошибок (401,403,404,500,502,503)
- Вебмордочка сейчас простая и минималистичная няшка

### Added

- Добавлен параметр `--delete` к файлу `getkey.sh`, который удаляет все рабочие ключи

## v0.4.2 - Feb 6, 2015

### Changed

- Исправлена ошибка обновления с официальных зеркал, отказался от использования `grep -P` потому как под freebsd и centos7 - не работает из коробки
- `getFreeKey=true;` теперь включен по-умолчанию

### Added

- Возможность исключения некоторых секций из парсинга

## v0.4.1 - Feb 6, 2015

Масштабное обновление, не совместимое с предыдущими версиями

### Changed

- Произведен рефакторинг
- Изменены имена переменных
- Переработана логика работы (теперь не просто ищется строка, начинающаяся на 'file=', а разбирается файл по секциям и собивается заново)
- Доступна возможность выбора необходимых языков и типов обновлений. Версия - не стабильная, при обнаружении ошибок - пожалуйста, создавайте соответствующие тикеты

## v0.3.11 - Feb 3, 2015

### Fixed

- Исправление ошибки с определением пути к файлу настроек (`$(pwd)` изменен на `$(dirname $0)`), исправлен путь проверки для валидации ключа (`../mod_000_loader_1080/..` на `../mod_000_loader_1082/..`)
- Вместо умершего `www.nod327.net` используем `tnoduse2.blogspot.ru`

### Changed

- Для отключения ограничений `wget` достаточно установить значения `wget_wait_sec` и `wget_limit_rate` пустыми (или закомментировать их вовсе)

## v0.3.9 - Oct 23, 2014

### Fixed

- Решение проблемы валидации ключей (скрипт `get-nod32-key.sh`)

## v0.3.8 - Aug 25, 2014

### Fixed

- Решение проблемы обновления с официальных зеркал для версий v5..v7

## v0.3.7 - Aug 12, 2014

### Changed

- Рефакторинг
- Вынос настроек в отдельный файл
- Незначительные доработки и изменения

### Added

- Логирования в скрипт обновления

## v0.3.6 - Aug 12, 2014

### Changed

- Чертовски мощный апдейт. В комплект добавлен скрипт `get-nod32-key.sh` который самостоятельно получает валидный ключ к официальным серверам
- Исправлена ошибка с отсутствием в пути пары `логин:пароль` при выполнении двух условий - `createLinksOnly` включен и обновляемся с официального зеркала

## v0.3.4 - Aug 9, 2014

### Changed

- Поправки в GUI, `footer.html` и `header.html` перенесены в `.\.webface\`, добавлена поддержка `mod_geoip` в `.htaccess`, сам скрипт обновления не изменен

## v0.3.3 - Aug 5, 2014

### Changed

- Незначительные поправки

## v0.3.2 - Aug 4, 2014

### Changed

- Незначительные поправки

## v0.3.1 - Aug 4, 2014

### Changed

- Добавлен "цветной" вывод сообщений
- Улучшено комментирование кода, исправлена пара мелких ошибок, выявленных после теста на боевом сервере
- Мелкие исправления

### Added

- Добавлена опция `createLinksOnly` которая позволяет НЕ скачивать все файлы обновления целиком, а только лишь указывать ссылки на них в 'update.ver'

## v0.3 - Aug 4, 2014

### Changed

- Полностью переписан **bash** скрипт, иной алгоритм работы

## v0.2.5-sh - Jul 22, 2014

### Changed

- **PHP** версия более не поддерживается, скрипт переписан на **bash**

## v0.2.5 - Jul 21, 2014

### Changed

- Масса мелких исправлений в .htaccess и верстке

## v0.2.4 - Jul 19, 2014

### Changed

- Релиз на гитхабе

[keepachangelog]:https://keepachangelog.com/en/1.0.0/
[semver]:https://semver.org/spec/v2.0.0.html
